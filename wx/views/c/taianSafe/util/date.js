var _Seconds=1e3,_Minute=60*_Seconds,_Houre=60*_Minute,_Day=24*_Houre,_Week=7*_Day,__toString=Object.prototype.toString,_Week_Name=["日","一","二","三","四","五","六"],DATCE_TCYPE={y:"FullYear",M:"Month",d:"Date",h:"Hours",w:"Week",m:"Minutes",s:"Seconds",S:"Milliseconds"},date={__FIELDS__:{FORMAT:{DATE:"yyyy-MM-dd",TIME:"HH:mm:ss",DATE_TIME:"yyyy-MM-dd HH:mm:ss",DATE_TIME_S:"yyyy-MM-dd HH:mm:ss.SSS"},TIME:{SECONDS:_Seconds,MINUTE:_Minute,HOURS:_Houre,DAY:_Day,WEEK:_Week}},isNull:function(t){return void 0===t||null===t},isBoolean:function(t){return t&&"boolean"===date.type(t)},getFormat:function(t){return t=t?"string"==typeof t?t:this.__FIELDS__.FORMAT.DATE:null},date:function(t){return t?"string"==typeof t?(t=t.replace(/-/g,"/"),new Date(t)):date.isDate(t)?t:new Date(t):new Date},yesterday:function(t){var e=this.plusDate(new Date,-1,DATCE_TCYPE.d);return t?this.format(e,this.getFormat(t)):e},today:function(){return this.format(new Date)},tomorrow:function(t){var e=this.plusDate(new Date,1,DATCE_TCYPE.d);return t?this.format(e,this.getFormat(t)):e},parse:function(t){return date.isDate(t)?t:new Date(Date.parse(t))},getWeek:function(t){return _Week_Name[this.date(t).getDay()]},getHoliday:function(){return _holiday.getHoliday.apply(_holiday,arguments)},getDayOfWeek:function(t){var e=null,n=new Date(t);return e=n.getDay(),e=0===e?7:e},getDayOfWeekName:function(t){var e=0;e="string"==typeof t?Number(t):t;var n=["一","二","三","四","五","六","日"];return n[e-1]},type:function(t){var e;return null==t?e=String(t):(e=__toString.call(t).toLowerCase(),e=e.substring(8,e.length-1)),e},isDate:function(t){return t&&"date"===date.type(t)},format:function(t,e){date.isDate(t)||(t=new Date(t));var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};e=e||this.__FIELDS__.FORMAT.DATE,/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in n)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return e},plusDate:function(t,e,n,r){if(t){e=null==e?1:+e,n=n?1===n.length?DATCE_TCYPE[n]:n:DATCE_TCYPE.d;var a=this.date(t),i="set"+n,s="get"+n;return DATCE_TCYPE.w===n?a.setDate(a.getDate()+7*e):a[i](a[s]()+e),r?this.format(a,this.__FIELDS__.FORMAT.DATE):a}},getDatePeriod:function(t,e,n){var t=this.date(t),e=this.date(e);switch(n){case"y":return e.getFullYear()-t.getFullYear();case"M":return 12*(e.getFullYear()-t.getFullYear())+(e.getMonth()-t.getMonth());case"w":return Math.floor((1*e-1*t)/_Day/7);case"h":return Math.floor((1*e-1*t)/_Houre);case"m":return Math.floor((1*e-1*t)/60/1e3);case"s":return Math.floor((1*e-1*t)/1e3);case"S":return Math.floor(1*e-1*t);default:return Math.floor((1*e-1*t)/_Day)}},getLastDayOfMon:function(t){t="string"==typeof t?new Date(t.replace(/-/g,"/")):t;var e=t.addMonths(t,1),n=new Date(e.getTime()-this.__FIELDS__.TIME.DAY);return t.format(n)},equals:function(t,e){return t&&e?0==this.diffTime(t,e):!1},after:function(t,e){return t&&e?this.diffTime(t,e)<0:!1},before:function(t,e){return t&&e?this.diffTime(t,e)>0:!1},prevDate:function(t,e){return t?t.addDays(t,-1,e):t.yesterday(e)},nextDate:function(t,e){return t?t.addDays(t,1,e):t.tomorrow(e)},getToMonthsEnd:function(t){var e=this.date(t),n=this.addMonths(e,1),r=this.diffDays(e,n),a=this.format(e,"yyyy-MM");return n=a+"-"+r},addMinutes:function(t,e,n){return this.plusDate(t,e,DATCE_TCYPE.m,this.getFormat(n))},addHours:function(t,e,n){return this.plusDate(t,e,DATCE_TCYPE.h,this.getFormat(n))},addDays:function(t,e,n){return this.plusDate(t,e,DATCE_TCYPE.d,this.getFormat(n))},addWeeks:function(t,e,n){return this.plusDate(date,e,DATCE_TCYPE.w,this.getFormat(n))},addMonths:function(t,e,n){return this.plusDate(t,e,DATCE_TCYPE.M,this.getFormat(n))},addQuarters:function(t,e,n){return this.plusDate(t,4*e,DATCE_TCYPE.M,this.getFormat(n))},addYears:function(t,e,n){return this.plusDate(t,e,DATCE_TCYPE.y,this.getFormat(n))},diffTime:function(t,e,n){t=this.parse(t),e=this.parse(e);var r=t.getTime(),a=e.getTime(),i=a-r;return n?i/n:i},diffSeconds:function(t,e){return this.diffTime(t,e,this.__FIELDS__.TIME.SECONDS)},diffMinutes:function(t,e){return this.diffTime(t,e,this.__FIELDS__.TIME.MINUTE)},diffHours:function(t,e){return this.diffTime(t,e,this.__FIELDS__.TIME.HOURS)},diffDays:function(t,e){return this.diffTime(t,e,this.__FIELDS__.TIME.DAY)},isBetween:function(t,e,n){return this.diffDays(e,t)<0||this.diffDays(n,t)>0?!1:!0},convertDateToString:function(t,e){for(var n=[],r=date.isNull(e)?this.__FIELDS__.FORMAT.DATE:e,a=0;a<t.length;a++)n.push(t[a].format(r));return n}};